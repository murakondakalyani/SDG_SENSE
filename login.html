<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .back-to-home {
  display: inline-block;
  margin-bottom: 15px;
  text-decoration: none;
  font-weight: bold;
  color: #1976d2;
  transition: color 0.3s ease;
}

.back-to-home:hover {
  color: #115293;
}
.back-button {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background: #3e4d25;
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      transition: background 0.3s;
    }

    .back-button:hover {
      background: #5c6c41;
    }

  </style>
</head>
<body class="login-page">


  <div class="login-container">
    <h2>Sign in</h2>
    <form onsubmit="login(event)">
  <input type="text" id="loginUsername" placeholder="Username" required />
  <input type="password" id="loginPassword" placeholder="Password" required />
  <button type="submit">Login</button>
  <p id="loginMsg" style="color: red; margin-top: 10px;"></p>

  <div class="links">
<p><a href="forgot.html">Forgot Password?</a></p>
    <a href="register.html">Sign Up</a>
  </div>

  <p class="or-line">or you can sign in with</p>
  <div class="social-icons">
  <a href="https://accounts.google.com/o/oauth2/v2/auth?client_id=YOUR_CLIENT_ID&redirect_uri=YOUR_REDIRECT_URL&response_type=code&scope=email%20profile
" target="_blank">
    <img src="https://img.icons8.com/ios-filled/30/google-logo.png" alt="Google">
  </a>
  <a href="https://github.com/login/oauth/authorize" target="_blank">
    <img src="https://img.icons8.com/ios-filled/30/github.png" alt="GitHub">
  </a>
 
 
</div>

</form>
 <a href="index.html" class="back-to-home">‚Üê Back </a>

</div>
</body>
<script>
  function loginUser() {
    // You can validate username/password here if needed
    localStorage.setItem("isLoggedIn", "true");
    window.location.href = "quiz.html?goal=1&title=No%20Poverty";
  }
</script>
<script>
  async function login(event) {
    event.preventDefault();

    const data = {
      username: document.getElementById("loginUsername").value,
      password: document.getElementById("loginPassword").value
    };

    try {
      const res = await fetch("http://localhost:5000/api/auth/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const result = await res.json();

      if (res.ok) {
        // Save token and user data
        localStorage.setItem("token", result.token);
        localStorage.setItem("user", JSON.stringify(result.user));

        // Redirect based on role
        const role = result.user.role;
        if (role === "admin") {
          window.location.href = "admin-dashboard.html";
        } else {
          window.location.href = "user-dashboard.html";
        }
      } else {
        alert(result.error);
      }
    } catch (err) {
      alert("Login failed. Try again.");
    }
  }
</script>


<script src="script.js"></script>
</html>